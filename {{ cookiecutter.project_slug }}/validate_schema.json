{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Data Product Specification Schema",
  "type": "object",
  "required": ["apiVersion", "kind", "name", "id", "domain", "team", "inputPorts", "outputPorts"],
  "properties": {
    "apiVersion": { "type": "string", "enum": ["v1.0"] },
    "kind": { "type": "string", "const": "DataProduct" },
    "name": { "type": "string", "minLength": 3 },
    "id": { "type": "string", "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$" },
    "domain": { "type": "string" },
    "status": { "type": "string", "enum": ["draft", "published", "deprecated"] },
    "tenant": { "type": "string", "const": "otto" },
    "team": {
      "type": "object",
      "required": ["name", "members"],
      "properties": {
        "name": { "type": "string" },
        "members": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["username", "role"],
            "properties": {
              "username": { "type": "string", "format": "email" },
              "role": { "type": "string", "enum": ["owner", "member"] }
            }
          }
        }
      }
    },
    "inputPorts": {
      "type": "object",
      "required": ["name", "type", "contractId"],
      "properties": {
        "type": { "type": "string", "enum": ["stream", "table", "api"] }
      }
    },
    "outputPorts": {
      "type": "object",
      "required": ["name", "type", "contractId"],
      "properties": {
        "type": { "type": "string", "const": "table" }
      }
    }
  }
}